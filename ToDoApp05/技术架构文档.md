# Todo应用技术架构文档

## 1. 项目概述

### 1.1 项目描述
创建一个现代化的待办事项管理应用，支持任务的增删改查、状态管理、批量操作等功能。

### 1.2 功能特性
- ✅ 添加待办事项
- ✅ 标记完成/取消完成
- ✅ 删除单个待办事项
- ✅ 查询过滤（全部/未完成/已完成）
- ✅ 批量删除已完成项目
- ✅ 清空所有待办事项
- ✅ 现代化UI设计，响应式布局

## 2. 技术架构

### 2.1 整体架构
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │   Backend       │    │   Database      │
│   (React)       │◄──►│   (Spring Boot) │◄──►│   (MySQL)       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 2.2 技术栈

#### 前端技术栈
- **框架**: React 18+
- **构建工具**: Vite
- **样式**: CSS3 + 现代设计
- **状态管理**: React Hooks
- **HTTP客户端**: Axios
- **开发语言**: TypeScript/JavaScript

#### 后端技术栈
- **框架**: Spring Boot 3.0+
- **语言**: Java 17+
- **构建工具**: Maven
- **数据库**: MySQL 8.0+
- **ORM**: Spring Data JPA
- **API文档**: Swagger/OpenAPI
- **验证**: Bean Validation
- **日志**: SLF4J + Logback

#### 数据库
- **数据库**: MySQL 8.0+
- **字符集**: utf8mb4
- **排序规则**: utf8mb4_unicode_ci

## 3. 数据库设计

### 3.1 数据库表结构

```sql
-- 创建数据库
CREATE DATABASE IF NOT EXISTS todoapp CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

USE todoapp;

-- 待办事项表
CREATE TABLE todos (
    id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '主键ID',
    title VARCHAR(255) NOT NULL COMMENT '待办事项标题',
    description TEXT COMMENT '待办事项描述',
    completed BOOLEAN DEFAULT FALSE COMMENT '完成状态：0-未完成，1-已完成',
    priority INT DEFAULT 0 COMMENT '优先级：0-低，1-中，2-高',
    due_date DATETIME COMMENT '截止日期',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    
    -- 索引
    INDEX idx_completed (completed),
    INDEX idx_priority (priority),
    INDEX idx_due_date (due_date),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='待办事项表';

-- 插入示例数据
INSERT INTO todos (title, description, completed, priority, due_date) VALUES
('学习React', '完成React基础教程学习', false, 2, '2024-12-31 23:59:59'),
('完成项目文档', '编写项目技术文档和API文档', false, 1, '2024-12-25 18:00:00'),
('代码审查', '对团队代码进行审查', true, 1, '2024-12-20 17:00:00'),
('单元测试', '编写单元测试用例', false, 0, '2024-12-30 16:00:00'),
('部署应用', '将应用部署到生产环境', false, 2, '2024-12-28 20:00:00');
```

## 4. API接口设计

### 4.1 基础信息
- **基础URL**: `http://localhost:8000`
- **API前缀**: `/api/v1`
- **数据格式**: JSON
- **字符编码**: UTF-8

### 4.2 统一响应格式

```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "total": 0
}
```

### 4.3 API接口列表

#### 4.3.1 获取待办事项列表
```http
GET /api/v1/todos
```

**请求参数**:
| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| completed | Boolean | 否 | null | 过滤完成状态 |
| limit | Integer | 否 | 100 | 限制返回数量 |
| offset | Integer | 否 | 0 | 偏移量 |

#### 4.3.2 创建待办事项
```http
POST /api/v1/todos
```

**请求体**:
```json
{
  "title": "新的待办事项",
  "description": "描述信息（可选）",
  "priority": 0,
  "dueDate": "2024-12-31T23:59:59"
}
```

#### 4.3.3 更新待办事项
```http
PUT /api/v1/todos/{id}
```

#### 4.3.4 删除待办事项
```http
DELETE /api/v1/todos/{id}
```

#### 4.3.5 切换完成状态
```http
PATCH /api/v1/todos/{id}/toggle
```

#### 4.3.6 删除已完成项目
```http
DELETE /api/v1/todos/completed
```

#### 4.3.7 清空所有待办事项
```http
DELETE /api/v1/todos/all
```

#### 4.3.8 健康检查
```http
GET /api/v1/health
```

## 5. 前端设计规范

### 5.1 页面布局
- **最大宽度**: 800px
- **居中显示**: 主体内容居中
- **响应式**: 支持移动端适配

### 5.2 组件结构
```
App
├── Header (标题)
├── TodoForm (输入表单)
├── TodoFilter (过滤条件)
├── TodoList (待办事项列表)
└── TodoActions (底部操作)
```

### 5.3 CSS样式规范
- **颜色方案**: 现代简洁配色
- **字体**: 系统默认字体
- **间距**: 统一的间距规范
- **交互**: 悬停效果和过渡动画
- **状态**: 完成状态的视觉反馈

## 6. 项目结构

### 6.1 后端项目结构
```
backend/
├── src/main/java/com/todoapp/
│   ├── TodoApplication.java
│   ├── controller/
│   ├── service/
│   ├── repository/
│   ├── entity/
│   ├── dto/
│   └── exception/
├── src/main/resources/
├── src/test/
├── db/
├── pom.xml
└── README.md
```

### 6.2 前端项目结构
```
front/
├── public/
├── src/
│   ├── components/
│   ├── services/
│   ├── styles/
│   ├── App.js
│   └── index.js
├── package.json
└── README.md
```

## 7. 开发环境配置

### 7.1 后端环境要求
- **JDK**: 17+
- **Maven**: 3.6+
- **MySQL**: 8.0+

### 7.2 前端环境要求
- **Node.js**: 16+
- **npm**: 8+

### 7.3 配置文件

#### 后端配置文件 (application.yml)
```yaml
server:
  port: 8000

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/todoapp?useSSL=false&serverTimezone=UTC
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
```

## 8. 部署说明

### 8.1 后端部署
1. 编译打包: `mvn clean package`
2. 运行JAR: `java -jar target/todo-backend-1.0.0.jar`
3. 访问地址: `http://localhost:8000`

### 8.2 前端部署
1. 安装依赖: `npm install`
2. 构建项目: `npm run build`
3. 部署到Web服务器

### 8.3 数据库部署
1. 创建数据库: 执行 `db/todoapp.sql`
2. 配置连接: 修改 `application.yml` 中的数据库连接信息

## 9. 测试策略

### 9.1 单元测试
- Service层业务逻辑测试
- Repository层数据访问测试
- Controller层API接口测试

### 9.2 集成测试
- 端到端API测试
- 数据库集成测试

## 10. 性能优化

### 10.1 后端优化
- 数据库索引优化
- 分页查询
- 缓存策略

### 10.2 前端优化
- 组件懒加载
- 虚拟滚动（大量数据）
- 防抖节流

## 11. 安全考虑

### 11.1 输入验证
- 前端表单验证
- 后端参数校验
- SQL注入防护

### 11.2 跨域配置
- CORS策略配置
- 允许前端域名访问

---

**文档版本**: 1.0.0  
**最后更新**: 2024-01-01  
**维护人员**: 开发团队
